<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pt"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AcaoService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">java.br.com.ligacao:ligacao</a> &gt; <a href="index.source.html" class="el_package">br.com.ligacao.services</a> &gt; <span class="el_source">AcaoService.java</span></div><h1>AcaoService.java</h1><pre class="source lang-java linenums">package br.com.ligacao.services;

import java.io.IOException;
import java.util.List;
import java.util.Scanner;
import java.util.concurrent.ExecutionException;

import br.com.ligacao.persistence.model.Acao;
import br.com.ligacao.persistence.model.AcaoDAO;
import br.com.ligacao.persistence.model.PromotorFisico;
import br.com.ligacao.persistence.model.PromotorJuridico;

/**
 * Classe responsavel por oferecer serviços relacionados a acoes.
 */
public final class AcaoService {

    /**
     * Construtor privado para evitar instanciação da classe.
     */
    private AcaoService() {
    }

    /**
     * Tipo de promotor. O, se for Pessoa Fisica; 1 se for Pessoa Juridica.
     */
    private static int TIPO_PROMOTOR;

    /**
     * Acao a ser criada/editada/excluida.
     */
<span class="fc" id="L32">    private static Acao acao = new Acao();</span>

    /**
     * Promotor fisico.
     */
<span class="fc" id="L37">    private static PromotorJuridico promotorJuridico = new PromotorJuridico();</span>

    /**
     * Promotor juridico.
     */
<span class="fc" id="L42">    private static PromotorFisico promotorFisico = new PromotorFisico();</span>

    /**
     * Scanner para entrada de dados pelo usuario.
     */
<span class="fc" id="L47">    private static Scanner scanner = new Scanner(System.in, &quot;UTF-8&quot;);</span>

    /**
     * Cadastrar nova acao de um promotor existente.
     *
     * @throws ExecutionException   se houver problema ao acessar o banco de dados
     * @throws InterruptedException se houver problema ao acessar o banco de dados
     */
    public static void cadastrar() throws ExecutionException, InterruptedException {
<span class="nc bnc" id="L56" title="All 2 branches missed.">        if (login()) {</span>
<span class="nc" id="L57">            System.out.println(&quot;----- Cadastrar Ação -----&quot;);</span>

<span class="nc" id="L59">            scanner.nextLine();</span>
<span class="nc" id="L60">            System.out.println(&quot;Nome da ação: &quot;);</span>
<span class="nc" id="L61">            acao.setNomeAcao(scanner.nextLine());</span>

<span class="nc" id="L63">            System.out.println(&quot;Data de realização: &quot;);</span>
<span class="nc" id="L64">            acao.setDataRealizacao(scanner.nextLine());</span>

<span class="nc" id="L66">            System.out.println(&quot;Categoria da ação: &quot;);</span>
<span class="nc" id="L67">            acao.setCategoriaAcao(scanner.nextLine());</span>

<span class="nc" id="L69">            System.out.println(&quot;Descrição: &quot;);</span>
<span class="nc" id="L70">            acao.setDescricao(scanner.nextLine());</span>

<span class="nc" id="L72">            System.out.println(&quot;Horário de início: &quot;);</span>
<span class="nc" id="L73">            acao.setHoraInicio(scanner.nextLine());</span>

<span class="nc" id="L75">            System.out.println(&quot;Horário de fim: &quot;);</span>
<span class="nc" id="L76">            acao.setHoraFim(scanner.nextLine());</span>

<span class="nc" id="L78">            System.out.println(&quot;0 - Confirmar o cadastro da acao\n&quot;</span>
                    + &quot;1 - Cancelar.\n&quot;);
<span class="nc" id="L80">            int opcaoConfirmar = scanner.nextInt();</span>

<span class="nc bnc" id="L82" title="All 2 branches missed.">            if (opcaoConfirmar == 0) {</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">                String nomePromotor = TIPO_PROMOTOR == 0</span>
<span class="nc" id="L84">                        ? promotorFisico.getNomePessoa()</span>
<span class="nc" id="L85">                        : promotorJuridico.getRazaoSocial();</span>
                try {
<span class="nc" id="L87">                    AcaoDAO.cadastraAcao(nomePromotor, acao);</span>

<span class="nc" id="L89">                } catch (IOException e) {</span>
<span class="nc" id="L90">                    System.out.println(&quot;Erro ao cadastrar Acao\n&quot;);</span>
<span class="nc" id="L91">                }</span>
<span class="nc" id="L92">                System.out.println(&quot;Acão cadastrada com sucesso!\n&quot;);</span>
<span class="nc" id="L93">            } else {</span>
<span class="nc" id="L94">                System.out.println(&quot;Cadastro da Ação cancelado!\n&quot;);</span>
            }
        }
<span class="nc" id="L97">    }</span>

    /**
     * Editar acao de um promotor existente.
     *
     * @throws ExecutionException   se houver problema ao acessar o banco de dados
     * @throws InterruptedException se houver problema ao acessar o banco de dados
     */
    public static void editar() throws ExecutionException, InterruptedException {
<span class="nc bnc" id="L106" title="All 2 branches missed.">        if (login()) {</span>
<span class="nc" id="L107">            System.out.println(&quot;----- Editar Ação -----&quot;);</span>

<span class="nc bnc" id="L109" title="All 2 branches missed.">            String nomePromotor = TIPO_PROMOTOR == 0</span>
<span class="nc" id="L110">                    ? promotorFisico.getNomePessoa()</span>
<span class="nc" id="L111">                    : promotorJuridico.getRazaoSocial();</span>
<span class="nc" id="L112">            List&lt;Acao&gt; acoes = AcaoDAO.consultaAcoes(nomePromotor);</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">            if (acoes.size() == 0) {</span>
<span class="nc" id="L114">                System.out.println(&quot;Esse promotor não possui ações cadastradas.&quot;);</span>
            } else {
<span class="nc" id="L116">                System.out.println(&quot;Esse promotor possui as seguintes ações:&quot;);</span>
<span class="nc" id="L117">                acoes.forEach(item -&gt; {</span>
<span class="nc" id="L118">                    System.out.println(item.getNomeAcao());</span>
<span class="nc" id="L119">                });</span>

<span class="nc" id="L121">                System.out.println(&quot;Nome da ação a ser editada:&quot;);</span>
<span class="nc" id="L122">                String nomeAcao = scanner.nextLine();</span>
<span class="nc" id="L123">                acao = AcaoDAO.consultaAcao(nomePromotor, nomeAcao);</span>

<span class="nc bnc" id="L125" title="All 2 branches missed.">                if (acao == null) {</span>
<span class="nc" id="L126">                    System.out.println(&quot;Essa ação não existe.\n&quot;);</span>
                } else {
<span class="nc" id="L128">                    int opcao = 0;</span>
<span class="nc bnc" id="L129" title="All 4 branches missed.">                    while (opcao &gt; -1 &amp;&amp; opcao &lt; 6) {</span>
<span class="nc" id="L130">                        System.out.println(&quot;Qual campo gostaria de editar:\n&quot;</span>
                                + &quot;0 - Categoria\n&quot;
                                + &quot;1 - Data de realização\n&quot;
                                + &quot;2 - Descrição\n&quot;
                                + &quot;3 - Hora de início\n&quot;
                                + &quot;4 - Hora de fim\n&quot;
                                + &quot;5 - Nome da ação\n&quot;
                                + &quot;6 - Cancelar\n&quot;);
<span class="nc" id="L138">                        opcao = scanner.nextInt();</span>

<span class="nc bnc" id="L140" title="All 7 branches missed.">                        switch (opcao) {</span>
                            case 0:
<span class="nc" id="L142">                                System.out.println(&quot;Categoria atual: &quot;</span>
<span class="nc" id="L143">                                        + acao.getCategoriaAcao()</span>
                                        + &quot;\nModificar para:&quot;);
<span class="nc" id="L145">                                scanner.nextLine();</span>
<span class="nc" id="L146">                                String modificado = scanner.nextLine();</span>
<span class="nc" id="L147">                                acao.setCategoriaAcao(modificado);</span>
<span class="nc" id="L148">                                break;</span>
                            case 1:
<span class="nc" id="L150">                                System.out.println(&quot;Data de realização atual: &quot;</span>
<span class="nc" id="L151">                                        + acao.getDataRealizacao()</span>
                                        + &quot;\nModificar para:&quot;);
<span class="nc" id="L153">                                acao.setDataRealizacao(scanner.nextLine());</span>
<span class="nc" id="L154">                                break;</span>
                            case 2:
<span class="nc" id="L156">                                System.out.println(&quot;Descrição atual: &quot;</span>
<span class="nc" id="L157">                                        + acao.getDescricao()</span>
                                        + &quot;\nModificar para:&quot;);
<span class="nc" id="L159">                                acao.setDescricao(scanner.nextLine());</span>
<span class="nc" id="L160">                                break;</span>
                            case 3:
<span class="nc" id="L162">                                System.out.println(&quot;Hora de início atual: &quot;</span>
<span class="nc" id="L163">                                        + acao.getHoraInicio()</span>
                                        + &quot;\nModificar para:&quot;);
<span class="nc" id="L165">                                acao.setHoraInicio(scanner.nextLine());</span>
<span class="nc" id="L166">                                break;</span>
                            case 4:
<span class="nc" id="L168">                                System.out.println(&quot;Hora de fim atual: &quot;</span>
<span class="nc" id="L169">                                        + acao.getHoraFim()</span>
                                        + &quot;\nModificar para:&quot;);
<span class="nc" id="L171">                                acao.setHoraFim(scanner.nextLine());</span>
<span class="nc" id="L172">                                break;</span>
                            case 5:
<span class="nc" id="L174">                                System.out.println(&quot;Nome da Ação atual: &quot;</span>
<span class="nc" id="L175">                                        + acao.getNomeAcao()</span>
                                        + &quot;\nModificar para:&quot;);
<span class="nc" id="L177">                                acao.setNomeAcao(scanner.nextLine());</span>
<span class="nc" id="L178">                                break;</span>
                            default:
                                break;
                        }

                        try {
<span class="nc" id="L184">                            AcaoDAO.cadastraAcao(nomePromotor, acao);</span>
<span class="nc" id="L185">                        } catch (IOException e) {</span>
<span class="nc" id="L186">                            System.out.println(&quot;Problema ao editar ação!&quot;);</span>
<span class="nc" id="L187">                        }</span>
                    }
<span class="nc" id="L189">                    System.out.println(&quot;Ação editada com sucesso!&quot;);</span>
                }
            }
        }
<span class="nc" id="L193">    }</span>

    /**
     * Exclui acao de um promotor existente.
     *
     * @throws ExecutionException   se houver problema ao acessar o banco de dados
     * @throws InterruptedException se houver problema ao acessar o banco de dados
     */
    public static void excluir() throws ExecutionException, InterruptedException {
<span class="nc bnc" id="L202" title="All 2 branches missed.">        if (login()) {</span>
<span class="nc" id="L203">            System.out.println(&quot;----- Excluir Ação -----&quot;);</span>

<span class="nc bnc" id="L205" title="All 2 branches missed.">            String nomePromotor = TIPO_PROMOTOR == 0</span>
<span class="nc" id="L206">                    ? promotorFisico.getNomePessoa()</span>
<span class="nc" id="L207">                    : promotorJuridico.getRazaoSocial();</span>

<span class="nc" id="L209">            List&lt;Acao&gt; acoes = AcaoDAO.consultaAcoes(nomePromotor);</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">            if (acoes.size() == 0) {</span>
<span class="nc" id="L211">                System.out.println(&quot;Esse promotor não possui ações cadastradas.&quot;);</span>
            } else {
<span class="nc" id="L213">                System.out.println(&quot;Esse promotor possui as seguintes ações:&quot;);</span>
<span class="nc" id="L214">                acoes.forEach(item -&gt; System.out.println(item.getNomeAcao()));</span>

<span class="nc" id="L216">                System.out.println(&quot;Nome da Ação a ser excluída:&quot;);</span>
<span class="nc" id="L217">                String nomeAcao = scanner.nextLine();</span>
<span class="nc" id="L218">                acao = AcaoDAO.consultaAcao(nomePromotor, nomeAcao);</span>

<span class="nc bnc" id="L220" title="All 2 branches missed.">                if (acao == null) {</span>
<span class="nc" id="L221">                    System.out.println(&quot;Essa Ação não está listada&quot;);</span>
                } else {
<span class="nc" id="L223">                    AcaoDAO.excluiAcao(nomeAcao, nomePromotor);</span>
                }
            }
        }
<span class="nc" id="L227">    }</span>

    /**
     * Realiza o login do promotor de acordo com tipo.
     *
     * @return true, se as informações de login são válidadas, false, caso o
     * usuário ou senha forem inválidos
     */
    private static boolean login() {
<span class="nc" id="L236">        TIPO_PROMOTOR = selecionaTipoPromotor();</span>

<span class="nc bnc" id="L238" title="All 2 branches missed.">        if (TIPO_PROMOTOR == 0) {</span>
            try {
<span class="nc" id="L240">                promotorFisico = PromotorFisicoService.login();</span>
<span class="nc" id="L241">            } catch (InterruptedException | ExecutionException e) {</span>
<span class="nc" id="L242">                System.out.println(&quot;Erro ao logar no sistema!\n&quot;);</span>
<span class="nc" id="L243">            }</span>
        } else {
            try {
<span class="nc" id="L246">                promotorJuridico = PromotorJuridicoService.login();</span>
<span class="nc" id="L247">            } catch (InterruptedException | ExecutionException e) {</span>
<span class="nc" id="L248">                e.printStackTrace();</span>
<span class="nc" id="L249">            }</span>
        }

<span class="nc bnc" id="L252" title="All 4 branches missed.">        boolean isLogado = promotorFisico != null || promotorJuridico != null;</span>
<span class="nc bnc" id="L253" title="All 2 branches missed.">        if (isLogado) {</span>
<span class="nc" id="L254">            System.out.println(&quot;Usuario logado no sistema!\n&quot;);</span>
        } else {
<span class="nc" id="L256">            System.out.println(&quot;Senha e/ou usuario incorretos!\n&quot;);</span>
        }
<span class="nc" id="L258">        return isLogado;</span>
    }

    /**
     * Método para selecionar o tipo de promotor, físico ou jurídico.
     *
     * @return 0, se o tipo de promotor for físico, 1, se o tipo de promotor
     * for jurídico
     */
    private static int selecionaTipoPromotor() {
<span class="fc" id="L268">        System.out.println(&quot;Selecione o tipo de pessoa: \n&quot;</span>
                + &quot;0 - Pessoa Física\n1 - Pessoa Juridica&quot;);
<span class="nc" id="L270">        return scanner.nextInt();</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>